{"remainingRequest":"/Users/fudengwei/Downloads/HomeDelivery/node_modules/babel-loader/lib/index.js!/Users/fudengwei/Downloads/HomeDelivery/node_modules/eslint-loader/index.js??ref--14-0!/Users/fudengwei/Downloads/HomeDelivery/src/store/index.js","dependencies":[{"path":"/Users/fudengwei/Downloads/HomeDelivery/src/store/index.js","mtime":1640763737876},{"path":"/Users/fudengwei/Downloads/HomeDelivery/babel.config.js","mtime":1640758526124},{"path":"/Users/fudengwei/Downloads/HomeDelivery/node_modules/cache-loader/dist/cjs.js","mtime":1640758527159},{"path":"/Users/fudengwei/Downloads/HomeDelivery/node_modules/babel-loader/lib/index.js","mtime":1640758527083},{"path":"/Users/fudengwei/Downloads/HomeDelivery/node_modules/eslint-loader/index.js","mtime":1640758527968}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgeyBjcmVhdGVTdG9yZSB9IGZyb20gJ3Z1ZXgnOyAvL+mYsuatouWIt+aWsOWQjui0reeJqei9pumHjOmdouayoeacieS6hgoKdmFyIHNldExvY2FsQ2FydExpc3QgPSBmdW5jdGlvbiBzZXRMb2NhbENhcnRMaXN0KHN0YXRlKSB7CiAgdmFyIGNhcnRMaXN0ID0gc3RhdGUuY2FydExpc3Q7CiAgdmFyIGNhcnRMaXN0U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoY2FydExpc3QpOyAvL+W+gGxvY2Fsc3RvcmFnZemHjOmdouWtmOaVsOaNruW/hemhu+aYr0pTT07mlbDmja4KCiAgbG9jYWxTdG9yYWdlLmNhcnRMaXN0ID0gY2FydExpc3RTdHJpbmc7Cn07Cgp2YXIgZ2V0TG9jYWxDYXJ0TGlzdCA9IGZ1bmN0aW9uIGdldExvY2FsQ2FydExpc3QoKSB7CiAgLy8geyBzaG9wSWQ6IHsgc2hvcE5hbWU6JycsIHByb2R1Y3RMaXN0OnsgcHJvZHVjdElkOnt9fX19CiAgLy8gewogIC8vICAgc2hvcElkOnsKICAvLyAgICAgc2hvcE5hbWU6JycsCiAgLy8gICAgIHByb2R1Y3RMaXN0OnsKICAvLyAgICAgICBwcm9kdWN0SWQ6e319CiAgLy8gICB9CiAgLy8gfQogIC8vICJfaWQiOiAiMiIsIm5hbWUiOiAi6L2m5Y6Y5a2QIDUwMGcgLyDku70iLCJpbWdVcmwiOiAiaHR0cDovL3d3dy5kZWxsLWxlZS5jb20vaW1ncy92dWUzL2NoZXJyeS5wbmciLCJzYWxlcyI6IDEwLCJwcmljZSI6IDk5LjYsIm9sZFByaWNlIjogMTE5LjYKICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY2FydExpc3QpIHx8IHt9Owp9OwoKZXhwb3J0IGRlZmF1bHQgY3JlYXRlU3RvcmUoewogIHN0YXRlOiB7CiAgICBjYXJ0TGlzdDogZ2V0TG9jYWxDYXJ0TGlzdCgpCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIGNoYW5nZUNhcnRJdGVtSW5mbzogZnVuY3Rpb24gY2hhbmdlQ2FydEl0ZW1JbmZvKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHZhciBzaG9wSWQgPSBwYXlsb2FkLnNob3BJZCwKICAgICAgICAgIHByb2R1Y3RJZCA9IHBheWxvYWQucHJvZHVjdElkLAogICAgICAgICAgcHJvZHVjdEluZm8gPSBwYXlsb2FkLnByb2R1Y3RJbmZvOwogICAgICB2YXIgc2hvcEluZm8gPSBzdGF0ZS5jYXJ0TGlzdFtzaG9wSWRdIHx8IHsKICAgICAgICBzaG9wTmFtZTogJycsCiAgICAgICAgcHJvZHVjdExpc3Q6IHt9CiAgICAgIH07CiAgICAgIHZhciBwcm9kdWN0ID0gc2hvcEluZm8ucHJvZHVjdExpc3RbcHJvZHVjdElkXTsKCiAgICAgIGlmICghcHJvZHVjdCkgewogICAgICAgIHByb2R1Y3RJbmZvLmNvdW50ID0gMDsKICAgICAgICBwcm9kdWN0ID0gcHJvZHVjdEluZm87CiAgICAgIH0KCiAgICAgIHByb2R1Y3QuY291bnQgPSBwcm9kdWN0LmNvdW50ICsgcGF5bG9hZC5udW07CgogICAgICBpZiAocGF5bG9hZC5udW0gPiAwKSB7CiAgICAgICAgcHJvZHVjdC5jaGVjayA9IHRydWU7CiAgICAgIH0gLy/lj6ropoHlvoDotK3nianovabliqDllYblk4HvvIzpgInkuK3lsLHkuLp0cnVlCgoKICAgICAgaWYgKHByb2R1Y3QuY291bnQgPCAwKSB7CiAgICAgICAgcHJvZHVjdC5jb3VudCA9IDA7CiAgICAgIH0KCiAgICAgIHNob3BJbmZvLnByb2R1Y3RMaXN0W3Byb2R1Y3RJZF0gPSBwcm9kdWN0OwogICAgICBzdGF0ZS5jYXJ0TGlzdFtzaG9wSWRdID0gc2hvcEluZm87IC8vIGNvbnNvbGUubG9nKHN0YXRlLmNhcnRMaXN0KTsKCiAgICAgIHNldExvY2FsQ2FydExpc3Qoc3RhdGUpOwogICAgfSwKICAgIGNoYW5nZVNob3BOYW1lOiBmdW5jdGlvbiBjaGFuZ2VTaG9wTmFtZShzdGF0ZSwgcGF5bG9hZCkgewogICAgICB2YXIgc2hvcElkID0gcGF5bG9hZC5zaG9wSWQsCiAgICAgICAgICBzaG9wTmFtZSA9IHBheWxvYWQuc2hvcE5hbWU7CiAgICAgIHZhciBzaG9wSW5mbyA9IHN0YXRlLmNhcnRMaXN0W3Nob3BJZF0gfHwgewogICAgICAgIHNob3BOYW1lOiAnJywKICAgICAgICBwcm9kdWN0TGlzdDoge30KICAgICAgfTsKICAgICAgc2hvcEluZm8uc2hvcE5hbWUgPSBzaG9wTmFtZTsKICAgICAgc3RhdGUuY2FydExpc3Rbc2hvcElkXSA9IHNob3BJbmZvOwogICAgICBzZXRMb2NhbENhcnRMaXN0KHN0YXRlKTsKICAgIH0sCiAgICBjaGFuZ2VDYXJ0SXRlbUNoZWNrZWQ6IGZ1bmN0aW9uIGNoYW5nZUNhcnRJdGVtQ2hlY2tlZChzdGF0ZSwgcGF5bG9hZCkgewogICAgICB2YXIgc2hvcElkID0gcGF5bG9hZC5zaG9wSWQsCiAgICAgICAgICBwcm9kdWN0SWQgPSBwYXlsb2FkLnByb2R1Y3RJZDsKICAgICAgdmFyIHByb2R1Y3QgPSBzdGF0ZS5jYXJ0TGlzdFtzaG9wSWRdLnByb2R1Y3RMaXN0W3Byb2R1Y3RJZF07CiAgICAgIHByb2R1Y3QuY2hlY2sgPSAhcHJvZHVjdC5jaGVjazsKICAgICAgc2V0TG9jYWxDYXJ0TGlzdChzdGF0ZSk7CiAgICB9LAogICAgY2xlYW5DYXJ0UHJvZHVjdHM6IGZ1bmN0aW9uIGNsZWFuQ2FydFByb2R1Y3RzKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHZhciBzaG9wSWQgPSBwYXlsb2FkLnNob3BJZDsKICAgICAgc3RhdGUuY2FydExpc3Rbc2hvcElkXS5wcm9kdWN0TGlzdCA9IHt9OwogICAgICBzZXRMb2NhbENhcnRMaXN0KHN0YXRlKTsKICAgIH0sCiAgICAvLyDngrnlh7vlhajpgInvvIzmiYDmnInllYblk4HooqvpgInkuK0KICAgIHNldENhcnRJdGVtc0NoZWNrZWQ6IGZ1bmN0aW9uIHNldENhcnRJdGVtc0NoZWNrZWQoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgdmFyIHNob3BJZCA9IHBheWxvYWQuc2hvcElkOwogICAgICB2YXIgcHJvZHVjdHMgPSBzdGF0ZS5jYXJ0TGlzdFtzaG9wSWRdLnByb2R1Y3RMaXN0OwoKICAgICAgaWYgKHByb2R1Y3RzKSB7CiAgICAgICAgZm9yICh2YXIga2V5IGluIHByb2R1Y3RzKSB7CiAgICAgICAgICB2YXIgcHJvZHVjdCA9IHByb2R1Y3RzW2tleV07CiAgICAgICAgICBwcm9kdWN0LmNoZWNrID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHNldExvY2FsQ2FydExpc3Qoc3RhdGUpOwogICAgfQogIH0sCiAgYWN0aW9uczoge30sCiAgbW9kdWxlczoge30KfSk7"},{"version":3,"sources":["/Users/fudengwei/Downloads/HomeDelivery/src/store/index.js"],"names":["createStore","setLocalCartList","state","cartList","cartListString","JSON","stringify","localStorage","getLocalCartList","parse","mutations","changeCartItemInfo","payload","shopId","productId","productInfo","shopInfo","shopName","productList","product","count","num","check","changeShopName","changeCartItemChecked","cleanCartProducts","setCartItemsChecked","products","key","actions","modules"],"mappings":"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","sourcesContent":["import { createStore } from 'vuex'\n\n//防止刷新后购物车里面没有了\nconst setLocalCartList = ( state ) => {\n  const { cartList } = state\n  const cartListString = JSON.stringify(cartList);//往localstorage里面存数据必须是JSON数据\n  localStorage.cartList = cartListString\n}\n\nconst getLocalCartList = () => {\n  // { shopId: { shopName:'', productList:{ productId:{}}}}\n  // {\n  //   shopId:{\n  //     shopName:'',\n  //     productList:{\n  //       productId:{}}\n  //   }\n  // }\n  // \"_id\": \"2\",\"name\": \"车厘子 500g / 份\",\"imgUrl\": \"http://www.dell-lee.com/imgs/vue3/cherry.png\",\"sales\": 10,\"price\": 99.6,\"oldPrice\": 119.6\n  return JSON.parse(localStorage.cartList) || {}\n}\n\nexport default createStore({\n  state: {\n    cartList: getLocalCartList()\n  },\n  mutations: {\n    changeCartItemInfo(state, payload,){\n      const { shopId, productId, productInfo } = payload;\n      let shopInfo = state.cartList[shopId] || {\n        shopName: '',productList:{}\n      };\n      let product = shopInfo.productList[productId];\n      if(!product) { \n        productInfo.count = 0\n        product = productInfo\n      }\n      product.count = product.count + payload.num;\n      if( payload.num > 0 ){ product.check = true } //只要往购物车加商品，选中就为true\n      if( product.count < 0 ) { product.count = 0 }\n      shopInfo.productList[productId] = product;\n      state.cartList[shopId] = shopInfo;\n      // console.log(state.cartList);\n      setLocalCartList(state)\n    },\n    changeShopName(state, payload){\n      const { shopId, shopName } = payload\n      const shopInfo = state.cartList[shopId ]|| {\n        shopName: '',productList:{}\n      }\n      shopInfo.shopName = shopName\n      state.cartList[shopId] = shopInfo\n      setLocalCartList(state)\n    },\n    changeCartItemChecked(state, payload){\n      const { shopId, productId } = payload;\n      const product = state.cartList[shopId].productList[productId]\n      product.check = !product.check\n      setLocalCartList(state)\n    },\n    cleanCartProducts(state, payload){\n      const { shopId } = payload\n      state.cartList[shopId].productList = {}\n      setLocalCartList(state)\n    },\n    // 点击全选，所有商品被选中\n    setCartItemsChecked(state, payload){\n      const { shopId } = payload\n      const products = state.cartList[shopId].productList\n      if(products){\n        for(let key in products){\n          const product = products[key]\n          product.check = true\n        }\n      }\n      setLocalCartList(state)\n    }\n  },\n  actions: {\n  },  \n  modules: {\n  }\n})\n"]}]}