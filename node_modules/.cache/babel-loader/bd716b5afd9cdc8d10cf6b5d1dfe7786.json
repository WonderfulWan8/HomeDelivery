{"remainingRequest":"E:\\HomeDelivery\\node_modules\\babel-loader\\lib\\index.js!E:\\HomeDelivery\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\HomeDelivery\\src\\store\\index.js","dependencies":[{"path":"E:\\HomeDelivery\\src\\store\\index.js","mtime":1643436718139},{"path":"E:\\HomeDelivery\\babel.config.js","mtime":1643435139739},{"path":"E:\\HomeDelivery\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1643435142996},{"path":"E:\\HomeDelivery\\node_modules\\babel-loader\\lib\\index.js","mtime":1643435142701},{"path":"E:\\HomeDelivery\\node_modules\\eslint-loader\\index.js","mtime":1643435145678}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgeyBjcmVhdGVTdG9yZSB9IGZyb20gJ3Z1ZXgnOyAvL+mYsuatouWIt+aWsOWQjui0reeJqei9pumHjOmdouayoeacieS6hgoKdmFyIHNldExvY2FsQ2FydExpc3QgPSBmdW5jdGlvbiBzZXRMb2NhbENhcnRMaXN0KHN0YXRlKSB7CiAgdmFyIGNhcnRMaXN0ID0gc3RhdGUuY2FydExpc3Q7CiAgdmFyIGNhcnRMaXN0U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoY2FydExpc3QpOyAvL+W+gGxvY2Fsc3RvcmFnZemHjOmdouWtmOaVsOaNruW/hemhu+aYr0pTT07mlbDmja4KCiAgbG9jYWxTdG9yYWdlLmNhcnRMaXN0ID0gY2FydExpc3RTdHJpbmc7Cn07Cgp2YXIgZ2V0TG9jYWxDYXJ0TGlzdCA9IGZ1bmN0aW9uIGdldExvY2FsQ2FydExpc3QoKSB7CiAgLy8geyBzaG9wSWQ6IHsgc2hvcE5hbWU6JycsIHByb2R1Y3RMaXN0OnsgcHJvZHVjdElkOnt9fX19CiAgcmV0dXJuIGxvY2FsU3RvcmFnZS5jYXJ0TGlzdCA9PT0gdW5kZWZpbmVkID8ge30gOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jYXJ0TGlzdCk7Cn07CgpleHBvcnQgZGVmYXVsdCBjcmVhdGVTdG9yZSh7CiAgc3RhdGU6IHsKICAgIGNhcnRMaXN0OiBnZXRMb2NhbENhcnRMaXN0KCkKICB9LAogIG11dGF0aW9uczogewogICAgY2hhbmdlQ2FydEl0ZW1JbmZvOiBmdW5jdGlvbiBjaGFuZ2VDYXJ0SXRlbUluZm8oc3RhdGUsIHBheWxvYWQpIHsKICAgICAgdmFyIHNob3BJZCA9IHBheWxvYWQuc2hvcElkLAogICAgICAgICAgcHJvZHVjdElkID0gcGF5bG9hZC5wcm9kdWN0SWQsCiAgICAgICAgICBwcm9kdWN0SW5mbyA9IHBheWxvYWQucHJvZHVjdEluZm87CiAgICAgIHZhciBzaG9wSW5mbyA9IHN0YXRlLmNhcnRMaXN0W3Nob3BJZF0gfHwgewogICAgICAgIHNob3BOYW1lOiAnJywKICAgICAgICBwcm9kdWN0TGlzdDoge30KICAgICAgfTsKICAgICAgdmFyIHByb2R1Y3QgPSBzaG9wSW5mby5wcm9kdWN0TGlzdFtwcm9kdWN0SWRdOwoKICAgICAgaWYgKCFwcm9kdWN0KSB7CiAgICAgICAgcHJvZHVjdEluZm8uY291bnQgPSAwOwogICAgICAgIHByb2R1Y3QgPSBwcm9kdWN0SW5mbzsKICAgICAgfQoKICAgICAgcHJvZHVjdC5jb3VudCA9IHByb2R1Y3QuY291bnQgKyBwYXlsb2FkLm51bTsKCiAgICAgIGlmIChwYXlsb2FkLm51bSA+IDApIHsKICAgICAgICBwcm9kdWN0LmNoZWNrID0gdHJ1ZTsKICAgICAgfSAvL+WPquimgeW+gOi0reeJqei9puWKoOWVhuWTge+8jOmAieS4reWwseS4unRydWUKCgogICAgICBpZiAocHJvZHVjdC5jb3VudCA8IDApIHsKICAgICAgICBwcm9kdWN0LmNvdW50ID0gMDsKICAgICAgfQoKICAgICAgc2hvcEluZm8ucHJvZHVjdExpc3RbcHJvZHVjdElkXSA9IHByb2R1Y3Q7CiAgICAgIHN0YXRlLmNhcnRMaXN0W3Nob3BJZF0gPSBzaG9wSW5mbzsgLy8gY29uc29sZS5sb2coc3RhdGUuY2FydExpc3QpOwoKICAgICAgc2V0TG9jYWxDYXJ0TGlzdChzdGF0ZSk7CiAgICB9LAogICAgY2hhbmdlU2hvcE5hbWU6IGZ1bmN0aW9uIGNoYW5nZVNob3BOYW1lKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHZhciBzaG9wSWQgPSBwYXlsb2FkLnNob3BJZCwKICAgICAgICAgIHNob3BOYW1lID0gcGF5bG9hZC5zaG9wTmFtZTsKICAgICAgdmFyIHNob3BJbmZvID0gc3RhdGUuY2FydExpc3Rbc2hvcElkXSB8fCB7CiAgICAgICAgc2hvcE5hbWU6ICcnLAogICAgICAgIHByb2R1Y3RMaXN0OiB7fQogICAgICB9OwogICAgICBzaG9wSW5mby5zaG9wTmFtZSA9IHNob3BOYW1lOwogICAgICBzdGF0ZS5jYXJ0TGlzdFtzaG9wSWRdID0gc2hvcEluZm87CiAgICAgIHNldExvY2FsQ2FydExpc3Qoc3RhdGUpOwogICAgfSwKICAgIGNoYW5nZUNhcnRJdGVtQ2hlY2tlZDogZnVuY3Rpb24gY2hhbmdlQ2FydEl0ZW1DaGVja2VkKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHZhciBzaG9wSWQgPSBwYXlsb2FkLnNob3BJZCwKICAgICAgICAgIHByb2R1Y3RJZCA9IHBheWxvYWQucHJvZHVjdElkOwogICAgICB2YXIgcHJvZHVjdCA9IHN0YXRlLmNhcnRMaXN0W3Nob3BJZF0ucHJvZHVjdExpc3RbcHJvZHVjdElkXTsKICAgICAgcHJvZHVjdC5jaGVjayA9ICFwcm9kdWN0LmNoZWNrOwogICAgICBzZXRMb2NhbENhcnRMaXN0KHN0YXRlKTsKICAgIH0sCiAgICBjbGVhbkNhcnRQcm9kdWN0czogZnVuY3Rpb24gY2xlYW5DYXJ0UHJvZHVjdHMoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgdmFyIHNob3BJZCA9IHBheWxvYWQuc2hvcElkOwogICAgICBzdGF0ZS5jYXJ0TGlzdFtzaG9wSWRdLnByb2R1Y3RMaXN0ID0ge307CiAgICAgIHNldExvY2FsQ2FydExpc3Qoc3RhdGUpOwogICAgfSwKICAgIC8vIOeCueWHu+WFqOmAie+8jOaJgOacieWVhuWTgeiiq+mAieS4rQogICAgc2V0Q2FydEl0ZW1zQ2hlY2tlZDogZnVuY3Rpb24gc2V0Q2FydEl0ZW1zQ2hlY2tlZChzdGF0ZSwgcGF5bG9hZCkgewogICAgICB2YXIgc2hvcElkID0gcGF5bG9hZC5zaG9wSWQ7CiAgICAgIHZhciBwcm9kdWN0cyA9IHN0YXRlLmNhcnRMaXN0W3Nob3BJZF0ucHJvZHVjdExpc3Q7CgogICAgICBpZiAocHJvZHVjdHMpIHsKICAgICAgICBmb3IgKHZhciBrZXkgaW4gcHJvZHVjdHMpIHsKICAgICAgICAgIHZhciBwcm9kdWN0ID0gcHJvZHVjdHNba2V5XTsKICAgICAgICAgIHByb2R1Y3QuY2hlY2sgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgc2V0TG9jYWxDYXJ0TGlzdChzdGF0ZSk7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7fSwKICBtb2R1bGVzOiB7fQp9KTs="},{"version":3,"sources":["E:/HomeDelivery/src/store/index.js"],"names":["createStore","setLocalCartList","state","cartList","cartListString","JSON","stringify","localStorage","getLocalCartList","undefined","parse","mutations","changeCartItemInfo","payload","shopId","productId","productInfo","shopInfo","shopName","productList","product","count","num","check","changeShopName","changeCartItemChecked","cleanCartProducts","setCartItemsChecked","products","key","actions","modules"],"mappings":";AAAA,SAASA,WAAT,QAA4B,MAA5B,C,CAEA;;AACA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAEC,KAAF,EAAa;AACpC,MAAQC,QAAR,GAAqBD,KAArB,CAAQC,QAAR;AACA,MAAMC,cAAc,GAAGC,IAAI,CAACC,SAAL,CAAeH,QAAf,CAAvB,CAFoC,CAEY;;AAChDI,EAAAA,YAAY,CAACJ,QAAb,GAAwBC,cAAxB;AACD,CAJD;;AAMA,IAAMI,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B;AACA,SAAOD,YAAY,CAACJ,QAAb,KAA0BM,SAA1B,GAAsC,EAAtC,GAA2CJ,IAAI,CAACK,KAAL,CAAWH,YAAY,CAACJ,QAAxB,CAAlD;AACD,CAHD;;AAKA,eAAeH,WAAW,CAAC;AACzBE,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAEK,gBAAgB;AADrB,GADkB;AAIzBG,EAAAA,SAAS,EAAE;AACTC,IAAAA,kBADS,8BACUV,KADV,EACiBW,OADjB,EAC0B;AACjC,UAAQC,MAAR,GAA2CD,OAA3C,CAAQC,MAAR;AAAA,UAAgBC,SAAhB,GAA2CF,OAA3C,CAAgBE,SAAhB;AAAA,UAA2BC,WAA3B,GAA2CH,OAA3C,CAA2BG,WAA3B;AACA,UAAIC,QAAQ,GAAGf,KAAK,CAACC,QAAN,CAAeW,MAAf,KAA0B;AACvCI,QAAAA,QAAQ,EAAE,EAD6B;AAC1BC,QAAAA,WAAW,EAAC;AADc,OAAzC;AAGA,UAAIC,OAAO,GAAGH,QAAQ,CAACE,WAAT,CAAqBJ,SAArB,CAAd;;AACA,UAAG,CAACK,OAAJ,EAAa;AACXJ,QAAAA,WAAW,CAACK,KAAZ,GAAoB,CAApB;AACAD,QAAAA,OAAO,GAAGJ,WAAV;AACD;;AACDI,MAAAA,OAAO,CAACC,KAAR,GAAgBD,OAAO,CAACC,KAAR,GAAgBR,OAAO,CAACS,GAAxC;;AACA,UAAIT,OAAO,CAACS,GAAR,GAAc,CAAlB,EAAqB;AAAEF,QAAAA,OAAO,CAACG,KAAR,GAAgB,IAAhB;AAAsB,OAXZ,CAWa;;;AAC9C,UAAIH,OAAO,CAACC,KAAR,GAAgB,CAApB,EAAwB;AAAED,QAAAA,OAAO,CAACC,KAAR,GAAgB,CAAhB;AAAmB;;AAC7CJ,MAAAA,QAAQ,CAACE,WAAT,CAAqBJ,SAArB,IAAkCK,OAAlC;AACAlB,MAAAA,KAAK,CAACC,QAAN,CAAeW,MAAf,IAAyBG,QAAzB,CAdiC,CAejC;;AACAhB,MAAAA,gBAAgB,CAACC,KAAD,CAAhB;AACD,KAlBQ;AAmBTsB,IAAAA,cAnBS,0BAmBMtB,KAnBN,EAmBaW,OAnBb,EAmBqB;AAC5B,UAAQC,MAAR,GAA6BD,OAA7B,CAAQC,MAAR;AAAA,UAAgBI,QAAhB,GAA6BL,OAA7B,CAAgBK,QAAhB;AACA,UAAMD,QAAQ,GAAGf,KAAK,CAACC,QAAN,CAAeW,MAAf,KAA0B;AACzCI,QAAAA,QAAQ,EAAE,EAD+B;AAC5BC,QAAAA,WAAW,EAAC;AADgB,OAA3C;AAGAF,MAAAA,QAAQ,CAACC,QAAT,GAAoBA,QAApB;AACAhB,MAAAA,KAAK,CAACC,QAAN,CAAeW,MAAf,IAAyBG,QAAzB;AACAhB,MAAAA,gBAAgB,CAACC,KAAD,CAAhB;AACD,KA3BQ;AA4BTuB,IAAAA,qBA5BS,iCA4BavB,KA5Bb,EA4BoBW,OA5BpB,EA4B4B;AACnC,UAAQC,MAAR,GAA8BD,OAA9B,CAAQC,MAAR;AAAA,UAAgBC,SAAhB,GAA8BF,OAA9B,CAAgBE,SAAhB;AACA,UAAMK,OAAO,GAAGlB,KAAK,CAACC,QAAN,CAAeW,MAAf,EAAuBK,WAAvB,CAAmCJ,SAAnC,CAAhB;AACAK,MAAAA,OAAO,CAACG,KAAR,GAAgB,CAACH,OAAO,CAACG,KAAzB;AACAtB,MAAAA,gBAAgB,CAACC,KAAD,CAAhB;AACD,KAjCQ;AAkCTwB,IAAAA,iBAlCS,6BAkCSxB,KAlCT,EAkCgBW,OAlChB,EAkCwB;AAC/B,UAAQC,MAAR,GAAmBD,OAAnB,CAAQC,MAAR;AACAZ,MAAAA,KAAK,CAACC,QAAN,CAAeW,MAAf,EAAuBK,WAAvB,GAAqC,EAArC;AACAlB,MAAAA,gBAAgB,CAACC,KAAD,CAAhB;AACD,KAtCQ;AAuCT;AACAyB,IAAAA,mBAxCS,+BAwCWzB,KAxCX,EAwCkBW,OAxClB,EAwC0B;AACjC,UAAQC,MAAR,GAAmBD,OAAnB,CAAQC,MAAR;AACA,UAAMc,QAAQ,GAAG1B,KAAK,CAACC,QAAN,CAAeW,MAAf,EAAuBK,WAAxC;;AACA,UAAGS,QAAH,EAAY;AACV,aAAI,IAAIC,GAAR,IAAeD,QAAf,EAAwB;AACtB,cAAMR,OAAO,GAAGQ,QAAQ,CAACC,GAAD,CAAxB;AACAT,UAAAA,OAAO,CAACG,KAAR,GAAgB,IAAhB;AACD;AACF;;AACDtB,MAAAA,gBAAgB,CAACC,KAAD,CAAhB;AACD;AAlDQ,GAJc;AAwDzB4B,EAAAA,OAAO,EAAE,EAxDgB;AA0DzBC,EAAAA,OAAO,EAAE;AA1DgB,CAAD,CAA1B","sourcesContent":["import { createStore } from 'vuex'\r\n\r\n//防止刷新后购物车里面没有了\r\nconst setLocalCartList = ( state ) => {\r\n  const { cartList } = state\r\n  const cartListString = JSON.stringify(cartList);//往localstorage里面存数据必须是JSON数据\r\n  localStorage.cartList = cartListString\r\n}\r\n\r\nconst getLocalCartList = () => {\r\n  // { shopId: { shopName:'', productList:{ productId:{}}}}\r\n  return localStorage.cartList === undefined ? {} : JSON.parse(localStorage.cartList);\r\n}\r\n\r\nexport default createStore({\r\n  state: {\r\n    cartList: getLocalCartList()\r\n  },\r\n  mutations: {\r\n    changeCartItemInfo(state, payload,){\r\n      const { shopId, productId, productInfo } = payload;\r\n      let shopInfo = state.cartList[shopId] || {\r\n        shopName: '',productList:{}\r\n      };\r\n      let product = shopInfo.productList[productId];\r\n      if(!product) { \r\n        productInfo.count = 0\r\n        product = productInfo\r\n      }\r\n      product.count = product.count + payload.num;\r\n      if( payload.num > 0 ){ product.check = true } //只要往购物车加商品，选中就为true\r\n      if( product.count < 0 ) { product.count = 0 }\r\n      shopInfo.productList[productId] = product;\r\n      state.cartList[shopId] = shopInfo;\r\n      // console.log(state.cartList);\r\n      setLocalCartList(state)\r\n    },\r\n    changeShopName(state, payload){\r\n      const { shopId, shopName } = payload\r\n      const shopInfo = state.cartList[shopId ]|| {\r\n        shopName: '',productList:{}\r\n      }\r\n      shopInfo.shopName = shopName\r\n      state.cartList[shopId] = shopInfo\r\n      setLocalCartList(state)\r\n    },\r\n    changeCartItemChecked(state, payload){\r\n      const { shopId, productId } = payload;\r\n      const product = state.cartList[shopId].productList[productId]\r\n      product.check = !product.check\r\n      setLocalCartList(state)\r\n    },\r\n    cleanCartProducts(state, payload){\r\n      const { shopId } = payload\r\n      state.cartList[shopId].productList = {}\r\n      setLocalCartList(state)\r\n    },\r\n    // 点击全选，所有商品被选中\r\n    setCartItemsChecked(state, payload){\r\n      const { shopId } = payload\r\n      const products = state.cartList[shopId].productList\r\n      if(products){\r\n        for(let key in products){\r\n          const product = products[key]\r\n          product.check = true\r\n        }\r\n      }\r\n      setLocalCartList(state)\r\n    }\r\n  },\r\n  actions: {\r\n  },  \r\n  modules: {\r\n  }\r\n})\r\n"]}]}